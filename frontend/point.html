<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Datapoint info</title>
  </head>
  <body>
    <table id="table" style="width:70%;margin-left: auto;margin-right: auto;">
      <th>Attribute</th>
      <th>Value</th>
    </table>
    <br>
    <img id="loadingAnimation" src="loading.gif">
	<script>
		const urlParams = new URLSearchParams(window.location.search)
		const pointId = urlParams.get("point")
    fetch("/api/datapoints/" + pointId)
      .then(function (response) {
        return response.json()
      })
      .then(function (info) {
        const tab = document.getElementById("table")
        for (const key in info) {
          if (info.hasOwnProperty(key)) {
            const row = document.createElement("tr")
            row.style.border = "5px solid black"
            let keycell = document.createElement("td")
            keycell.innerHTML = key
            keycell.style.textAlign = "center"
            let valuecell = document.createElement("td")
            valuecell.innerHTML = info[key]
            valuecell.style.textAlign = "center"
            row.appendChild(keycell)
            row.appendChild(valuecell)
            tab.appendChild(row)
          }
        }
        const link = document.createElement("a")
        link.href = "video.html?video=" + info.video_id + "&time=" + info.start_seconds
        document.body.appendChild(link)
        document.body.appendChild(document.createElement("br"))
        const img = document.createElement("img")
        img.src = "/api/datapoints/" + info.id + "/thumbnail"
        img.style.display = "block"
        img.style.marginLeft = "auto"
        img.style.marginRight = "auto"
        //document.body.appendChild(img)
        link.appendChild(img)
        document.getElementById("loadingAnimation").remove()
      })
	</script>
  </body>
</html>
